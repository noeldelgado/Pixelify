/* Pixelify -v 0.1.0 - Licensed under the MIT lincese*/
!function(){"use strict";function a(a,b){if(a){this.image=a;var c=document.createElement("canvas");if(c.getContext&&c.getContext("2d")){this._canvas=c;for(var d in b)b.hasOwnProperty(d)&&(this[d]=b[d]);this.init(b)}}}window.Pixelify=a,a.prototype={init:function(a){var b=function(){this.image.onload=null,this.pixelate(a)}.bind(this);this.image.onload=b,this.image.complete&&this.image.onload()},pixelate:function(){var a,b,c,d,e,f,g,h,i,j,k,l;for(l=~~(this.pixel/2),this.pixel=this.pixel||10,this.x=this.x||0,this.y=this.y||0,this.w=this.w||this.image.width,this.h=this.h||this.image.height,this.alpha=this.alpha||1,this.clean=this.clean||!1,this._context=this._canvas.getContext("2d"),this._canvas.width=this.image.width,this._canvas.height=this.image.height,this._context.drawImage(this.image,0,0),k=this._context.getImageData(this.x,this.y,this.w,this.h).data,this.clean&&(this._canvasClean=document.createElement("canvas"),this._contextClean=this._canvasClean.getContext("2d"),this._canvasClean.width=this._canvas.width,this._canvasClean.height=this._canvas.height),b=0;b<=this.h+l;b+=this.pixel)for(d=b,d>=this.h&&(d=this.h-this.pixel+l),a=0;a<=this.w+l;a+=this.pixel)c=a,c>=this.w&&(c=this.w-this.pixel+l),e=4*d*this.w+4*c,f=k[e],g=k[e+1],h=k[e+2],i=this.alpha*k[e+3]/255,j="rgba("+f+","+g+","+h+","+i+")",this[this.clean?"_contextClean":"_context"].fillStyle=j,this[this.clean?"_contextClean":"_context"].fillRect(this.x+a-l,this.y+b-l,this.pixel,this.pixel);return this.replace(),this},_getDataURL:function(){return this[this.clean?"_canvasClean":"_canvas"].toDataURL("image/png")},replace:function(){return this.image.setAttribute("src",this._getDataURL()),this},save:function(){var a=this._getDataURL(),b=this.image.width,c=this.image.height;window.open(a,"Pixelify","width="+b+",height="+c)}}}();